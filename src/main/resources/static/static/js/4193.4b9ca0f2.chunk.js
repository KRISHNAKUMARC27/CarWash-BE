"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[4193],{44193:function(e,t,a){a.r(t);var n=a(72791),s=a(61889),i=a(48550),l=a(49644),r=a(94925),o=a(58406),c=a(23786),m=a(94294),d=a(23735),p=a(91923),u=a(67724),h=a(19035),x=a(97892),f=a.n(x),j=a(29464),v=a(80184);t.default=function(e){let{data:t,setAppointmentUpdateOpen:a,fetchAllAppointmentData:x}=e;const g=t?{...t,appointmentDateTime:t.appointmentDateTime?f()(t.appointmentDateTime):null}:{},[Z,D]=(0,n.useState)(g),[b,C]=(0,n.useState)([]),[A,S]=(0,n.useState)([]),[T,_]=n.useState(!1),[y,w]=n.useState(""),[N,P]=n.useState("");(0,n.useEffect)((()=>(k(),Y(),()=>{D({}),C([]),S([])})),[]),(0,n.useEffect)((()=>{console.log(t),D(t?{...t,appointmentDateTime:t.appointmentDateTime?f()(t.appointmentDateTime):null}:{})}),[t]);const k=async()=>{try{const e=await(0,h.A_)("/service");C(e)}catch(e){console.log(e.message)}},Y=async()=>{try{const e=await(0,h.A_)("/employee");S(e)}catch(e){console.error(e.message)}},E=(e,t)=>{const a={...Z,[e]:t};D(a)};return(0,v.jsxs)("div",{children:[(0,v.jsx)(d.Z,{title:"Enter Appointment Details",children:(0,v.jsxs)(s.ZP,{container:!0,direction:"row",spacing:p.dv,children:[(0,v.jsxs)(s.ZP,{item:!0,xs:4,children:[(0,v.jsx)("br",{}),(0,v.jsx)(i.Z,{label:"Customer Name",required:!0,variant:"standard",value:Z.customerName||"",onChange:e=>E("customerName",e.target.value)})]}),(0,v.jsx)(s.ZP,{item:!0,xs:4,children:(0,v.jsx)(i.Z,{label:"Phone",required:!0,variant:"outlined",value:Z.phone||"",onChange:e=>E("phone",e.target.value)})}),(0,v.jsx)(s.ZP,{item:!0,xs:4,children:(0,v.jsx)(l.Z,{options:b,getOptionLabel:e=>e.desc,value:b.find((e=>e.desc===Z.service))||null,onChange:(e,t)=>{E("service",t?t.desc:"")},renderInput:e=>(0,v.jsx)(i.Z,{...e,label:"Select Service",variant:"outlined",fullWidth:!0})})}),(0,v.jsx)(s.ZP,{item:!0,xs:4,children:(0,v.jsx)(u.x,{label:"Appointment Date & Time",value:Z.appointmentDateTime,onChange:e=>{D({...Z,appointmentDateTime:e.format("YYYY-MM-DDTHH:mm:ss")})},renderInput:e=>(0,v.jsx)(i.Z,{...e,fullWidth:!0})})}),(0,v.jsxs)(s.ZP,{item:!0,xs:4,children:[(0,v.jsx)(r.Z,{id:"demo-select-small",children:"Staff"}),(0,v.jsx)(o.Z,{labelId:"demo-select-small",id:"demo-select-small",value:Z.staffName||"",label:"Staff",onChange:e=>E("staffName",e.target.value),children:A.map((e=>(0,v.jsx)(c.Z,{value:e.name,children:e.name},e.id)))})]}),(0,v.jsx)(s.ZP,{item:!0,xs:12,children:(0,v.jsx)(i.Z,{label:"Description",variant:"standard",multiline:!0,fullWidth:!0,value:Z.description||"",onChange:e=>E("description",e.target.value)})})]})}),(0,v.jsx)("br",{}),(0,v.jsx)("div",{className:"content",children:Z.customerName&&Z.phone&&Z.service&&Z.appointmentDateTime&&(0,v.jsx)(m.Z,{variant:"contained",color:"error",onClick:()=>(async e=>{try{const t=await(0,h.j0)("/appointments",e);x&&x(),a&&a(!1),w("Created appointment for "+t.customerName),P("success"),_(!0),console.log(t)}catch(t){console.log(t.message),w(t.message),P("info"),_(!0)}})(Z),children:"Add/Update Appointment"})}),T&&(0,v.jsx)(j.Z,{showAlert:T,setShowAlert:_,alertColor:N,alertMess:y})]})}}}]);
//# sourceMappingURL=4193.4b9ca0f2.chunk.js.map