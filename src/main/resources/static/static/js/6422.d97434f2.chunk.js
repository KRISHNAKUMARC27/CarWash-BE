"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[6422],{6422:function(e,a,l){l.r(a);var n=l(72791),r=l(1582),s=l(79836),t=l(56890),o=l(35855),i=l(53994),d=l(53382),c=l(94294),m=l(5574),u=l(65661),y=l(39157),h=l(48550),p=l(68096),x=l(94925),Z=l(58406),v=l(23786),j=l(97123),S=l(97892),f=l.n(S),g=l(41985),A=l(23735),C=l(29464),b=l(19035),P=l(80184);a.default=()=>{const[e,a]=(0,n.useState)([]),[l,S]=(0,n.useState)(f()()),[M,E]=(0,n.useState)(null),[W,N]=(0,n.useState)(!1),[k,I]=(0,n.useState)({salaryPaid:"",paymentMode:"CASH"}),[T,w]=(0,n.useState)(!1),[D,Y]=(0,n.useState)({type:"SALARY-ADVANCE",paymentMode:"",expenseAmount:0,comment:""}),[_,R]=(0,n.useState)(!1),[O,B]=(0,n.useState)(""),[F,U]=(0,n.useState)("");(0,n.useEffect)((()=>{H()}),[]);const H=async()=>{try{const e=await(0,b.A_)("/employee");a(e)}catch(e){console.error("Error fetching employees:",e)}},K=()=>{N(!1),w(!1),E(null),I({salaryPaid:"",paymentMode:""})},L=e=>{const{name:a,value:l}=e.target;I((e=>({...e,[a]:l})))},V=e=>{const{name:a,value:l}=e.target;Y((e=>({...e,[a]:l})))};return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(A.Z,{title:"Settle Salary",children:[(0,P.jsx)(r.Z,{direction:"row",spacing:2,mb:2,children:(0,P.jsx)(g.M,{label:"Salary Date",value:l,onChange:e=>S(e),format:"YYYY-MM-DD"})}),(0,P.jsxs)(s.Z,{children:[(0,P.jsx)(t.Z,{children:(0,P.jsxs)(o.Z,{children:[(0,P.jsx)(i.Z,{children:"Staff Name"}),(0,P.jsx)(i.Z,{children:"Action"})]})}),(0,P.jsx)(d.Z,{children:e.map((e=>(0,P.jsxs)(o.Z,{children:[(0,P.jsx)(i.Z,{children:e.name}),(0,P.jsxs)(i.Z,{children:[(0,P.jsx)(c.Z,{variant:"contained",color:"success",onClick:()=>(async e=>{try{const a=await(0,b.A_)(`/employee/setupEmployeeSalary/${e}/${l.format("YYYY-MM-DD")}`);E(a),I({salaryPaid:a.salaryEarned-a.salaryAdvance,paymentMode:""}),N(!0)}catch(a){console.error("Error in setupEmployeeSalary:",a),B(a.message||"Error fetching employee salary."),U("error"),R(!0)}})(e.id),children:"Settle Salary"}),(0,P.jsx)(c.Z,{variant:"contained",color:"info",onClick:()=>{Y((a=>({...a,empName:e.name,empId:e.id}))),w(!0)},children:"Pay Advance"})]})]},e.id)))})]})]}),(0,P.jsxs)(m.Z,{open:W,onClose:K,maxWidth:"sm",fullWidth:!0,children:[(0,P.jsxs)(u.Z,{children:["Settle Salary - ",null===M||void 0===M?void 0:M.name]}),(0,P.jsxs)(y.Z,{children:[(0,P.jsx)(h.Z,{fullWidth:!0,margin:"dense",label:"Salary Type",value:(null===M||void 0===M?void 0:M.salaryType)||"",InputProps:{readOnly:!0}}),(0,P.jsx)(h.Z,{fullWidth:!0,margin:"dense",label:"Settlement Type",value:(null===M||void 0===M?void 0:M.salarySettlementType)||"",InputProps:{readOnly:!0}}),(0,P.jsx)(h.Z,{fullWidth:!0,margin:"dense",label:"Salary Earned",value:(null===M||void 0===M?void 0:M.salaryEarned)||"",InputProps:{readOnly:!0}}),(0,P.jsx)(h.Z,{fullWidth:!0,margin:"dense",label:"Salary Advance",value:(null===M||void 0===M?void 0:M.salaryAdvance)||"",InputProps:{readOnly:!0}}),(0,P.jsx)(h.Z,{fullWidth:!0,margin:"dense",label:"Salary To Be Paid",name:"salaryPaid",type:"number",value:k.salaryPaid,onChange:L}),(0,P.jsxs)(p.Z,{fullWidth:!0,margin:"dense",children:[(0,P.jsx)(x.Z,{children:"Payment Mode"}),(0,P.jsxs)(Z.Z,{name:"paymentMode",value:k.paymentMode,onChange:L,label:"Payment Mode",children:[(0,P.jsx)(v.Z,{value:"CASH",children:"Cash"}),(0,P.jsx)(v.Z,{value:"BANK TRANSFER",children:"Bank Transfer"}),(0,P.jsx)(v.Z,{value:"UPI",children:"UPI"})]})]})]}),(0,P.jsxs)(j.Z,{children:[(0,P.jsx)(c.Z,{onClick:K,children:"Cancel"}),(0,P.jsx)(c.Z,{variant:"contained",color:"primary",onClick:async()=>{try{const e={...M,salaryPaid:k.salaryPaid,paymentMode:k.paymentMode,salaryDate:l.toISOString()};await(0,b.j0)("/employee/settleEmployeeSalary",e),B("Salary settled successfully!"),U("success"),R(!0),K()}catch(e){console.error("Error submitting salary:",e),B(e.message||"Failed to submit salary."),U("error"),R(!0)}},children:"Submit"})]})]}),(0,P.jsxs)(m.Z,{open:T,onClose:K,maxWidth:"sm",fullWidth:!0,children:[(0,P.jsxs)(u.Z,{children:["Paying Salary Advance for ",null===D||void 0===D?void 0:D.empName]}),(0,P.jsxs)(y.Z,{children:[(0,P.jsx)(h.Z,{fullWidth:!0,margin:"dense",label:"Expense Type",value:(null===D||void 0===D?void 0:D.type)||"",InputProps:{readOnly:!0}}),(0,P.jsx)(h.Z,{fullWidth:!0,margin:"dense",label:"Advance Amount",name:"expenseAmount",type:"number",value:D.expenseAmount,onChange:V}),(0,P.jsxs)(p.Z,{fullWidth:!0,margin:"dense",children:[(0,P.jsx)(x.Z,{children:"Payment Mode"}),(0,P.jsxs)(Z.Z,{name:"paymentMode",value:D.paymentMode,onChange:V,label:"Payment Mode",children:[(0,P.jsx)(v.Z,{value:"CASH",children:"Cash"}),(0,P.jsx)(v.Z,{value:"BANK TRANSFER",children:"Bank Transfer"}),(0,P.jsx)(v.Z,{value:"UPI",children:"UPI"})]})]}),(0,P.jsx)(h.Z,{fullWidth:!0,margin:"dense",label:"Comment",name:"comment",value:D.comment,onChange:V})]}),(0,P.jsxs)(j.Z,{children:[(0,P.jsx)(c.Z,{onClick:K,children:"Cancel"}),(0,P.jsx)(c.Z,{variant:"contained",color:"primary",onClick:async()=>{try{const e={...D,desc:(null===D||void 0===D?void 0:D.empName)+" - SALARY-ADVANCE"};await(0,b.j0)("/expense/salaryAdvance",e),B("Salary advance added successfully!"),U("success"),R(!0),K()}catch(e){console.error("Error submitting advance:",e),B(e.message||"Failed to submit advance."),U("error"),R(!0)}},children:"Submit"})]})]}),_&&(0,P.jsx)(C.Z,{showAlert:_,setShowAlert:R,alertColor:F,alertMess:O})]})}},65661:function(e,a,l){var n=l(87462),r=l(63366),s=l(72791),t=l(63733),o=l(94419),i=l(20890),d=l(66934),c=l(31402),m=l(17673),u=l(85090),y=l(80184);const h=["className","id"],p=(0,d.ZP)(i.Z,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,a)=>a.root})({padding:"16px 24px",flex:"0 0 auto"}),x=s.forwardRef((function(e,a){const l=(0,c.Z)({props:e,name:"MuiDialogTitle"}),{className:i,id:d}=l,x=(0,r.Z)(l,h),Z=l,v=(e=>{const{classes:a}=e;return(0,o.Z)({root:["root"]},m.a,a)})(Z),{titleId:j=d}=s.useContext(u.Z);return(0,y.jsx)(p,(0,n.Z)({component:"h2",className:(0,t.Z)(v.root,i),ownerState:Z,ref:a,variant:"h6",id:null!=d?d:j},x))}));a.Z=x}}]);
//# sourceMappingURL=6422.d97434f2.chunk.js.map