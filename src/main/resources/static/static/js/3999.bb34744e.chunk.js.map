{"version":3,"file":"static/js/3999.bb34744e.chunk.js","mappings":"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","sources":["views/expense/ExpenseReports.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Bar } from 'react-chartjs-2';\r\nimport { getRequest } from 'utils/fetchRequest';\r\nimport { Tabs, Tab, Typography, Grid, Button } from '@mui/material';\r\nimport { DatePicker } from '@mui/x-date-pickers/DatePicker';\r\nimport dayjs from 'dayjs';\r\nimport { Chart as ChartJS, CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend } from 'chart.js';\r\nimport MainCard from 'ui-component/cards/MainCard';\r\nimport isoWeek from 'dayjs/plugin/isoWeek';\r\ndayjs.extend(isoWeek);\r\n\r\nChartJS.register(CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend);\r\n\r\nconst ExpenseReports = () => {\r\n  const [expenseData, setExpenseData] = useState({});\r\n\r\n  const [tabValue, setTabValue] = useState(0);\r\n\r\n  const [startDate, setStartDate] = useState(dayjs().subtract(7, 'day')); // Default: Last 7 days\r\n  const [endDate, setEndDate] = useState(dayjs()); // Default: Today\r\n\r\n  useEffect(() => {\r\n    fetchExpenseData('daily', dayjs().format('YYYY-MM-DD'));\r\n  }, []);\r\n\r\n  const fetchExpenseData = async (type, param) => {\r\n    try {\r\n      const url = `${process.env.REACT_APP_API_URL}/expense/report/${type}/${param}`;\r\n      const data = await getRequest(url);\r\n      setExpenseData(data);\r\n    } catch (err) {\r\n      console.error('Error fetching expense data:', err);\r\n    }\r\n  };\r\n\r\n  const fetchDateRangeData = async () => {\r\n    try {\r\n      const url = `${process.env.REACT_APP_API_URL}/expense/report/daterange?startDate=${startDate.format(\r\n        'YYYY-MM-DD'\r\n      )}&endDate=${endDate.format('YYYY-MM-DD')}`;\r\n      const data = await getRequest(url);\r\n      setExpenseData(data);\r\n    } catch (err) {\r\n      console.error('Error fetching expense data:', err);\r\n    }\r\n  };\r\n\r\n  const handleTabChange = (event, newValue) => {\r\n    setTabValue(newValue);\r\n\r\n    let param;\r\n    const today = dayjs();\r\n    const year = today.year();\r\n    const month = today.month() + 1;\r\n    const date = today.format('YYYY-MM-DD');\r\n    const week = today.isoWeek();\r\n\r\n    switch (newValue) {\r\n      case 0:\r\n        param = date;\r\n        break;\r\n      case 1:\r\n        param = `${year}/${week}`;\r\n        break;\r\n      case 2:\r\n        param = `${year}/${month}`;\r\n        break;\r\n      case 3:\r\n        param = `${year}`;\r\n        break;\r\n      default:\r\n        return;\r\n    }\r\n\r\n    fetchExpenseData(newValue === 0 ? 'daily' : newValue === 1 ? 'weekly' : newValue === 2 ? 'monthly' : 'yearly', param);\r\n  };\r\n\r\n  const generateTotalExpenseChart = () => {\r\n    return {\r\n      labels: ['Total Expense'],\r\n      datasets: [\r\n        {\r\n          label: 'Total',\r\n          data: [expenseData.total || 0],\r\n          backgroundColor: ['#3e95cd']\r\n        }\r\n      ]\r\n    };\r\n  };\r\n\r\n  const generateByTypeChart = () => {\r\n    const byType = expenseData.byType || {};\r\n    const labels = Object.keys(byType);\r\n    const values = Object.values(byType);\r\n\r\n    return {\r\n      labels,\r\n      datasets: [\r\n        {\r\n          label: 'Expense by Type',\r\n          data: values,\r\n          backgroundColor: labels.map(() => '#8e5ea2')\r\n        }\r\n      ]\r\n    };\r\n  };\r\n\r\n  const generateByPaymentModeChart = () => {\r\n    const byPayment = expenseData.byPaymentMode || {};\r\n    const labels = Object.keys(byPayment);\r\n    const values = Object.values(byPayment);\r\n\r\n    return {\r\n      labels,\r\n      datasets: [\r\n        {\r\n          label: 'By Payment Mode',\r\n          data: values,\r\n          backgroundColor: labels.map(() => '#3cba9f')\r\n        }\r\n      ]\r\n    };\r\n  };\r\n\r\n  return (\r\n    <MainCard title=\"Expense Report\">\r\n      <Grid container spacing={2}>\r\n        {/* Date Range Picker */}\r\n        <Grid item lg={5} md={5} sm={5} xs={5}>\r\n          <DatePicker label=\"Start Date\" value={startDate} onChange={(newValue) => setStartDate(newValue)} />\r\n        </Grid>\r\n        <Grid item lg={5} md={5} sm={5} xs={5}>\r\n          <DatePicker label=\"End Date\" value={endDate} onChange={(newValue) => setEndDate(newValue)} />\r\n        </Grid>\r\n        <Grid item lg={2} md={2} sm={2} xs={2}>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={() => {\r\n              fetchDateRangeData();\r\n            }}\r\n          >\r\n            Get Expense\r\n          </Button>\r\n        </Grid>\r\n        {/* Tabs for predefined filters */}\r\n        <Grid item lg={12} md={12} sm={12} xs={12}>\r\n          <Typography variant=\"h2\">Expense</Typography>\r\n          <Tabs value={tabValue} onChange={handleTabChange}>\r\n            <Tab label=\"Daily\" />\r\n            <Tab label=\"Weekly\" />\r\n            <Tab label=\"Monthly\" />\r\n            <Tab label=\"Yearly\" />\r\n          </Tabs>\r\n        </Grid>\r\n\r\n        {/* Chart */}\r\n        <Grid item xs={12} md={4}>\r\n          <Typography variant=\"h6\">Total Expense</Typography>\r\n          <Bar data={generateTotalExpenseChart()} />\r\n        </Grid>\r\n        <Grid item xs={12} md={4}>\r\n          <Typography variant=\"h6\">By Type</Typography>\r\n          <Bar data={generateByTypeChart()} />\r\n        </Grid>\r\n        <Grid item xs={12} md={4}>\r\n          <Typography variant=\"h6\">By Payment Mode</Typography>\r\n          <Bar data={generateByPaymentModeChart()} />\r\n        </Grid>\r\n      </Grid>\r\n    </MainCard>\r\n  );\r\n};\r\n\r\nexport default ExpenseReports;\r\n"],"names":["dayjs","isoWeek","ChartJS","CategoryScale","LinearScale","BarElement","Title","Tooltip","Legend","ExpenseReports","expenseData","setExpenseData","useState","tabValue","setTabValue","startDate","setStartDate","subtract","endDate","setEndDate","useEffect","fetchExpenseData","format","async","type","param","url","data","getRequest","err","console","error","_jsx","MainCard","title","children","_jsxs","Grid","container","spacing","item","lg","md","sm","xs","DatePicker","label","value","onChange","newValue","Button","variant","color","onClick","fetchDateRangeData","Typography","Tabs","handleTabChange","event","today","year","month","date","week","Tab","Bar","labels","datasets","total","backgroundColor","generateByTypeChart","byType","Object","keys","values","map","generateByPaymentModeChart","byPayment","byPaymentMode"],"sourceRoot":""}