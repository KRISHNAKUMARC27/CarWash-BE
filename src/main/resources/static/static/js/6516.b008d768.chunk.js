"use strict";(self.webpackChunkcar_wash_management=self.webpackChunkcar_wash_management||[]).push([[6516],{96516:function(e,t,s){s.r(t);var a=s(72791),l=s(68899),r=s(13967),o=s(61979),n=s(44507),i=s(64554),c=s(20068),d=s(13400),h=s(38820),m=s(45781),u=s(93213),p=s(29464),g=s(44713),y=s(19035),x=s(80184);const z=(0,g.Z)((0,a.lazy)((()=>s.e(8203).then(s.bind(s,58203))))),w=(0,g.Z)((0,a.lazy)((()=>s.e(456).then(s.bind(s,60456))))),j=(0,g.Z)((0,a.lazy)((()=>s.e(811).then(s.bind(s,50811)))));t.default=()=>{const[e,t]=(0,a.useState)(!1),[s,g]=(0,a.useState)(""),[S,Z]=(0,a.useState)("info"),[b,f]=(0,a.useState)([]),[v,C]=(0,a.useState)(),[M,A]=(0,a.useState)(!1),[L,k]=(0,a.useState)({}),R=(0,a.useMemo)((()=>Object.keys(L).map((e=>b[e]))),[L,b]),[K,V]=(0,a.useState)(!1),[N,O]=(0,a.useState)([]),[H,T]=(0,a.useState)({}),[P,_]=(0,a.useState)(!1);(0,a.useEffect)((()=>(E(),F(),()=>{f([]),O([])})),[]);const E=async()=>{try{const e=await(0,y.A_)("/estimate");f(e)}catch(e){console.error(e.message)}},F=async()=>{try{const e=await(0,y.A_)("/config/paymentmodes");O(e)}catch(e){console.log(e.message)}},I=()=>{A(!1),C({}),V(!1),_(!1),E()},B=(0,a.useMemo)((()=>[{accessorKey:"estimateId",header:"Id",size:50},{accessorKey:"jobId",header:"JobCard No.",size:50},{accessorKey:"grandTotal",header:"Bill Amt",size:50},{accessorKey:"pendingAmount",header:"Pending",size:50},{accessorKey:"ownerName",header:"Owner",size:50},{accessorKey:"vehicleName",header:"Vehicle",size:50},{accessorKey:"vehicleRegNo",header:"Reg. No.",size:50},{accessorKey:"ownerPhoneNumber",header:"Phone",size:100},{accessorKey:"billCloseDate",header:"Bill Close Date",size:100},{accessorKey:"creditFlag",header:"Credit ?",size:100,filterVariant:"multi-select",Cell:e=>{let{cell:t}=e;return t.getValue()?"Yes":"No"}},{accessorKey:"creditSettledFlag",header:"Credit Settled ?",size:100,filterVariant:"multi-select",Cell:e=>{let{cell:t}=e;return t.getValue()?"Yes":"No"}}]),[]),D=(0,r.Z)(),Y=(0,a.useMemo)((()=>(0,o.Z)({palette:{mode:D.palette.mode,primary:D.palette.secondary,info:{main:"rgb(255,122,0)"},background:{default:"rgba(0, 0, 0, 0)"}},typography:{button:{textTransform:"none",fontSize:"1.2rem"}},components:{MuiTooltip:{styleOverrides:{tooltip:{fontSize:"1.1rem"}}},MuiSwitch:{styleOverrides:{thumb:{color:"pink"}}}}})),[D]);return(0,x.jsxs)(x.Fragment,{children:[e&&(0,x.jsx)(p.Z,{showAlert:e,setShowAlert:t,alertColor:S,alertMess:s}),(0,x.jsx)(n.Z,{theme:Y,children:(0,x.jsx)(l.P2,{columns:B,data:b,enableFacetedValues:!0,enableEditing:!0,enableRowSelection:!0,onRowSelectionChange:k,state:{rowSelection:L},muiTablePaperProps:{elevation:0,sx:{borderRadius:"0",background:"linear-gradient(195deg, #e2d7d5, #cf8989)"}},renderRowActions:e=>{let{row:t}=e;return(0,x.jsx)(i.Z,{sx:{display:"flex",gap:"1rem"},children:(0,x.jsx)(c.Z,{arrow:!0,placement:"right",title:"Estimate",children:(0,x.jsx)(d.Z,{onClick:()=>{C(t.original),A(!0)},children:(0,x.jsx)(h.Z,{})})})})},renderTopToolbarCustomActions:()=>Object.keys(L).length>0&&(0,x.jsxs)(i.Z,{sx:{display:"flex",gap:2},children:[(0,x.jsx)(c.Z,{title:"Settle Bill",children:(0,x.jsx)(d.Z,{onClick:()=>{R.some((e=>0===e.pendingAmount))?alert("One or more rows have a pending amount of 0."):V(!0)},children:(0,x.jsx)(m.Z,{})})}),(0,x.jsx)(c.Z,{title:"Receipt",children:(0,x.jsx)(d.Z,{onClick:()=>{T((e=>({...e,amount:R.reduce(((e,t)=>e+(t.grandTotal||0)),0),estimateIdList:R.map((e=>e.estimateId)),ownerName:R[0].ownerName}))),_(!0)},children:(0,x.jsx)(u.Z,{})})})]})})}),M&&(0,x.jsx)(z,{estimate:v,setEstimate:C,paymentModes:N,estimateCreateOpen:M,handleClose:I,setAlertMess:g,setShowAlert:t,setAlertColor:Z}),K&&(0,x.jsx)(w,{paymentModes:N,settleBillDialogOpen:K,selectedRows:R,handleClose:I,setAlertMess:g,setShowAlert:t}),P&&(0,x.jsx)(j,{receipt:H,setReceipt:T,paymentModes:N,receiptDialogOpen:P,selectedRows:R,handleClose:I,setAlertMess:g,setShowAlert:t})]})}},38820:function(e,t,s){var a=s(76189),l=s(80184);t.Z=(0,a.Z)((0,l.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit")},45781:function(e,t,s){var a=s(76189),l=s(80184);t.Z=(0,a.Z)((0,l.jsx)("path",{fillRule:"evenodd",d:"M20 3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM10 17H5v-2h5v2zm0-4H5v-2h5v2zm0-4H5V7h5v2zm4.82 6L12 12.16l1.41-1.41 1.41 1.42L17.99 9l1.42 1.42L14.82 15z"}),"FactCheck")},93213:function(e,t,s){var a=s(76189),l=s(80184);t.Z=(0,a.Z)((0,l.jsx)("path",{d:"M18 17H6v-2h12v2zm0-4H6v-2h12v2zm0-4H6V7h12v2zM3 22l1.5-1.5L6 22l1.5-1.5L9 22l1.5-1.5L12 22l1.5-1.5L15 22l1.5-1.5L18 22l1.5-1.5L21 22V2l-1.5 1.5L18 2l-1.5 1.5L15 2l-1.5 1.5L12 2l-1.5 1.5L9 2 7.5 3.5 6 2 4.5 3.5 3 2v20z"}),"Receipt")}}]);
//# sourceMappingURL=6516.b008d768.chunk.js.map