{"version":3,"file":"static/js/1421.06132582.chunk.js","mappings":"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","sources":["views/estimate/CreditEstimate.js","../node_modules/@mui/icons-material/esm/Edit.js","../node_modules/@mui/icons-material/esm/FactCheck.js"],"sourcesContent":["import React, { useMemo, useState, useEffect } from 'react';\r\nimport { MaterialReactTable } from 'material-react-table';\r\nimport { createTheme, ThemeProvider, useTheme, Tooltip, IconButton, Box } from '@mui/material';\r\nimport { Edit, FactCheck } from '@mui/icons-material';\r\nimport { lazy } from 'react';\r\n\r\n// project imports\r\nimport Loadable from 'ui-component/Loadable';\r\nimport { getRequest } from 'utils/fetchRequest';\r\nimport AlertDialog from 'views/utilities/AlertDialog';\r\nconst BillPayment = Loadable(lazy(() => import('views/estimate/BillPayment')));\r\nconst MultiSettle = Loadable(lazy(() => import('views/estimate/MultiSettle')));\r\n\r\nconst CreditEstimate = () => {\r\n  const [showAlert, setShowAlert] = useState(false);\r\n  const [alertMess, setAlertMess] = useState('');\r\n  const [data, setData] = useState([]);\r\n  const [estimate, setEstimate] = useState();\r\n  const [estimateCreateOpen, setEstimateCreateOpen] = useState(false);\r\n\r\n  const [rowSelection, setRowSelection] = useState({});\r\n  const selectedRows = useMemo(() => Object.keys(rowSelection).map((key) => data[key]), [rowSelection, data]);\r\n\r\n  const [settleBillDialogOpen, setSettleBillDialogOpen] = useState(false);\r\n  const [paymentModes, setPaymentModes] = useState([]);\r\n\r\n  useEffect(() => {\r\n    fetchCreditOpenEstimateData();\r\n    getPaymentModes();\r\n\r\n    return () => {\r\n      setData([]);\r\n      setPaymentModes([]);\r\n    };\r\n  }, []);\r\n\r\n  const fetchCreditOpenEstimateData = async () => {\r\n    try {\r\n      const data = await getRequest(process.env.REACT_APP_API_URL + '/estimate/findByCreditFlag');\r\n      setData(data);\r\n    } catch (err) {\r\n      console.error(err.message);\r\n    }\r\n  };\r\n\r\n  const getPaymentModes = async () => {\r\n    try {\r\n      const data = await getRequest(process.env.REACT_APP_API_URL + '/config/paymentmodes');\r\n      setPaymentModes(data);\r\n    } catch (err) {\r\n      console.log(err.message);\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setEstimateCreateOpen(false);\r\n    setEstimate({});\r\n    setSettleBillDialogOpen(false);\r\n    fetchCreditOpenEstimateData();\r\n  };\r\n\r\n  //should be memoized or stable\r\n  const columns = useMemo(\r\n    () => [\r\n      {\r\n        accessorKey: 'estimateId', //access nested data with dot notation\r\n        header: 'Id',\r\n        size: 50\r\n        //filterVariant: 'multi-select'\r\n      },\r\n      {\r\n        accessorKey: 'jobId', //normal accessorKey\r\n        header: 'JobCard No.',\r\n        size: 50\r\n      },\r\n      {\r\n        accessorKey: 'grandTotal',\r\n        header: 'Bill Amt',\r\n        size: 50\r\n      },\r\n      {\r\n        accessorKey: 'pendingAmount',\r\n        header: 'Pending',\r\n        size: 50\r\n      },\r\n      {\r\n        accessorKey: 'ownerName', //access nested data with dot notation\r\n        header: 'Owner',\r\n        size: 50\r\n      },\r\n      {\r\n        accessorKey: 'vehicleName',\r\n        header: 'Vehicle',\r\n        size: 50\r\n      },\r\n      {\r\n        accessorKey: 'vehicleRegNo',\r\n        header: 'Reg. No.',\r\n        size: 50\r\n      },\r\n      {\r\n        accessorKey: 'ownerPhoneNumber', //normal accessorKey\r\n        header: 'Phone',\r\n        size: 100\r\n      },\r\n      {\r\n        accessorKey: 'billCloseDate',\r\n        header: 'Bill Close Date',\r\n        size: 100\r\n      },\r\n      {\r\n        accessorKey: 'creditFlag',\r\n        header: 'Credit ?',\r\n        size: 100,\r\n        filterVariant: 'multi-select',\r\n        Cell: ({ cell }) => (cell.getValue() ? 'Yes' : 'No')\r\n      },\r\n      {\r\n        accessorKey: 'creditSettledFlag',\r\n        header: 'Credit Settled ?',\r\n        size: 100,\r\n        filterVariant: 'multi-select',\r\n        Cell: ({ cell }) => (cell.getValue() ? 'Yes' : 'No')\r\n      }\r\n    ],\r\n    []\r\n  );\r\n\r\n  const globalTheme = useTheme();\r\n\r\n  const tableTheme = useMemo(\r\n    () =>\r\n      createTheme({\r\n        palette: {\r\n          mode: globalTheme.palette.mode, //let's use the same dark/light mode as the global theme\r\n          primary: globalTheme.palette.secondary, //swap in the secondary color as the primary for the table\r\n          info: {\r\n            main: 'rgb(255,122,0)' //add in a custom color for the toolbar alert background stuff\r\n          },\r\n          background: {\r\n            default: 'rgba(0, 0, 0, 0)' // set background color to fully transparent\r\n            // set background color to transparent\r\n            // globalTheme.palette.mode === \"light\"\r\n            //   ? \"rgb(254,255,244)\" //random light yellow color for the background in light mode\r\n            //   : \"#000\", //pure black table in dark mode for fun\r\n          }\r\n        },\r\n        typography: {\r\n          button: {\r\n            textTransform: 'none', //customize typography styles for all buttons in table by default\r\n            fontSize: '1.2rem'\r\n          }\r\n        },\r\n        components: {\r\n          MuiTooltip: {\r\n            styleOverrides: {\r\n              tooltip: {\r\n                fontSize: '1.1rem' //override to make tooltip font size larger\r\n              }\r\n            }\r\n          },\r\n          MuiSwitch: {\r\n            styleOverrides: {\r\n              thumb: {\r\n                color: 'pink' //change the color of the switch thumb in the columns show/hide menu to pink\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }),\r\n    [globalTheme]\r\n  );\r\n  const gradientAngle = 195;\r\n  const color1 = '#e2d7d5';\r\n  const color2 = '#cf8989';\r\n\r\n  return (\r\n    <>\r\n      {showAlert && <AlertDialog showAlert={showAlert} setShowAlert={setShowAlert} alertColor={alertColor} alertMess={alertMess} />}\r\n      <ThemeProvider theme={tableTheme}>\r\n        <MaterialReactTable\r\n          columns={columns}\r\n          data={data}\r\n          enableFacetedValues\r\n          //editingMode=\"modal\"\r\n          enableEditing\r\n          enableRowSelection\r\n          onRowSelectionChange={setRowSelection}\r\n          state={{ rowSelection }}\r\n          muiTablePaperProps={{\r\n            elevation: 0,\r\n            sx: {\r\n              borderRadius: '0',\r\n              background: `linear-gradient(${gradientAngle}deg, ${color1}, ${color2})`\r\n            }\r\n          }}\r\n          renderRowActions={({ row }) => (\r\n            <Box sx={{ display: 'flex', gap: '1rem' }}>\r\n              <Tooltip arrow placement=\"right\" title=\"Estimate\">\r\n                <IconButton\r\n                  onClick={() => {\r\n                    setEstimate(row.original);\r\n                    setEstimateCreateOpen(true);\r\n                  }}\r\n                >\r\n                  <Edit />\r\n                </IconButton>\r\n              </Tooltip>\r\n            </Box>\r\n          )}\r\n          renderTopToolbarCustomActions={() =>\r\n            Object.keys(rowSelection).length > 0 && (\r\n              <Box sx={{ display: 'flex', gap: 2 }}>\r\n                <Tooltip title=\"Settle Bill\">\r\n                  <IconButton\r\n                    onClick={() => {\r\n                      const hasZeroPendingAmount = selectedRows.some((row) => row.pendingAmount === 0);\r\n\r\n                      if (hasZeroPendingAmount) {\r\n                        alert('One or more rows have a pending amount of 0.');\r\n                        return;\r\n                      }\r\n                      setSettleBillDialogOpen(true);\r\n                    }}\r\n                  >\r\n                    <FactCheck />\r\n                  </IconButton>\r\n                </Tooltip>\r\n              </Box>\r\n            )\r\n          }\r\n        />\r\n      </ThemeProvider>\r\n      {estimateCreateOpen && (\r\n        <BillPayment\r\n          estimate={estimate}\r\n          setEstimate={setEstimate}\r\n          paymentModes={paymentModes}\r\n          estimateCreateOpen={estimateCreateOpen}\r\n          handleClose={handleClose}\r\n          setAlertMess={setAlertMess}\r\n          setShowAlert={setShowAlert}\r\n        />\r\n      )}\r\n      {settleBillDialogOpen && (\r\n        <MultiSettle\r\n          paymentModes={paymentModes}\r\n          settleBillDialogOpen={settleBillDialogOpen}\r\n          selectedRows={selectedRows}\r\n          handleClose={handleClose}\r\n          setAlertMess={setAlertMess}\r\n          setShowAlert={setShowAlert}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CreditEstimate;\r\n","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z\"\n}), 'Edit');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  fillRule: \"evenodd\",\n  d: \"M20 3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM10 17H5v-2h5v2zm0-4H5v-2h5v2zm0-4H5V7h5v2zm4.82 6L12 12.16l1.41-1.41 1.41 1.42L17.99 9l1.42 1.42L14.82 15z\"\n}), 'FactCheck');"],"names":["BillPayment","Loadable","lazy","MultiSettle","CreditEstimate","showAlert","setShowAlert","useState","alertMess","setAlertMess","data","setData","estimate","setEstimate","estimateCreateOpen","setEstimateCreateOpen","rowSelection","setRowSelection","selectedRows","useMemo","Object","keys","map","key","settleBillDialogOpen","setSettleBillDialogOpen","paymentModes","setPaymentModes","useEffect","fetchCreditOpenEstimateData","getPaymentModes","async","getRequest","err","console","error","message","log","handleClose","columns","accessorKey","header","size","filterVariant","Cell","_ref","cell","getValue","_ref2","globalTheme","useTheme","tableTheme","createTheme","palette","mode","primary","secondary","info","main","background","default","typography","button","textTransform","fontSize","components","MuiTooltip","styleOverrides","tooltip","MuiSwitch","thumb","color","_jsxs","_Fragment","children","_jsx","AlertDialog","alertColor","ThemeProvider","theme","MaterialReactTable","enableFacetedValues","enableEditing","enableRowSelection","onRowSelectionChange","state","muiTablePaperProps","elevation","sx","borderRadius","renderRowActions","_ref3","row","Box","display","gap","Tooltip","arrow","placement","title","IconButton","onClick","original","Edit","renderTopToolbarCustomActions","length","some","pendingAmount","alert","FactCheck","createSvgIcon","d","fillRule"],"sourceRoot":""}