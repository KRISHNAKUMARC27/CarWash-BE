"use strict";(self.webpackChunkcar_wash_management=self.webpackChunkcar_wash_management||[]).push([[2789],{32789:function(e,t,n){n.r(t);var s=n(72791),i=n(39281),o=n(79836),d=n(56890),r=n(35855),l=n(53994),a=n(53382),c=n(68096),u=n(94925),h=n(58406),v=n(23786),x=n(49644),y=n(48550),p=n(94294),j=n(61889),Z=n(23735),m=n(13967),g=n(95193),w=n(19035),f=n(80184);t.default=e=>{let{data:t,updateData:n,firstInputRef:b}=e;const S=(0,m.Z)(),q=(0,g.Z)(S.breakpoints.down("sm")),D=["ADMIN"],k=(JSON.parse(localStorage.getItem("roles"))||[]).some((e=>D.includes(e))),[I,A]=s.useState([]),[C,W]=s.useState([]),[E,L]=s.useState([]);s.useEffect((()=>($(),_(),()=>{A([]),W([]),L([])})),[]);const $=async()=>{try{const e=await(0,w.A_)("/service/serviceCategory");A(e)}catch(e){console.log(e.message)}},_=async()=>{try{const e=await(0,w.A_)("/service");L(e)}catch(e){console.log(e.message)}},K=(e,s,i)=>{const o=[...t];o[e][s]=i,n(o)},N=e=>{(async e=>{try{const t=await(0,w.j0)("/service/findServiceInventoryWithFilter",e);W(t)}catch(t){console.log(t.message)}})({categoryList:[e]})};return(0,f.jsxs)(Z.Z,{title:"Job Service Information",children:[(0,f.jsx)("div",{style:{overflowX:"auto"},children:(0,f.jsx)(i.Z,{children:(0,f.jsxs)(o.Z,{style:{minWidth:q?"600px":"1000px"},children:[(0,f.jsx)(d.Z,{children:(0,f.jsxs)(r.Z,{children:[(0,f.jsx)(l.Z,{sx:{width:"20%"},children:"Category"}),(0,f.jsx)(l.Z,{sx:{width:"30%"},children:"Spares"}),(0,f.jsx)(l.Z,{sx:{width:"10%"},children:"Qty"}),(0,f.jsx)(l.Z,{sx:{width:"10%"},children:"Rate"}),k&&(0,f.jsx)(l.Z,{sx:{width:"10%"},children:"Discount"}),(0,f.jsx)(l.Z,{sx:{width:"10%"},children:"Amount"}),(0,f.jsx)(l.Z,{sx:{width:"10%"},children:"Action"})]})}),(0,f.jsx)(a.Z,{children:t.map(((e,s)=>(0,f.jsxs)(r.Z,{children:[(0,f.jsx)(l.Z,{sx:{width:"20%"},children:(0,f.jsxs)(c.Z,{variant:"standard",sx:{m:1,minWidth:120},children:[(0,f.jsx)(u.Z,{}),(0,f.jsx)(h.Z,{fullWidth:!0,value:(null===e||void 0===e?void 0:e.category)||"",onChange:e=>{N(e.target.value),K(s,"category",e.target.value)},onKeyDown:e=>{var t;"Enter"===e.key&&(e.preventDefault(),null===(t=document.querySelector(`#spares-input-${s}`))||void 0===t||t.focus())},children:I.map((e=>(0,f.jsx)(v.Z,{value:e.category,children:e.category},e.id)))})]})}),(0,f.jsx)(l.Z,{sx:{width:"30%"},children:(0,f.jsx)(x.Z,{options:C.filter((e=>!t.some((t=>t.sparesId===e.id)))),getOptionLabel:e=>e.desc,style:{width:300},value:E.find((t=>t.desc===e.sparesAndLabour))||null,isOptionEqualToValue:(e,t)=>e.id===t.id,onChange:(t,n)=>{n&&(K(s,"sparesAndLabour",n.desc),K(s,"rate",n.amount),K(s,"amount",n.amount*(null===e||void 0===e?void 0:e.qty)-(null===e||void 0===e?void 0:e.discount)||0),K(s,"sparesId",n.id))},renderInput:t=>(0,f.jsx)(y.Z,{...t,id:`spares-input-${s}`,label:"Search Service",disabled:!!e.sparesId,onKeyDown:e=>{var t;"Enter"===e.key&&(e.preventDefault(),null===(t=document.querySelector(`#qty-input-${s}`))||void 0===t||t.focus())}})})}),(0,f.jsx)(l.Z,{sx:{width:"10%"},children:(0,f.jsx)(y.Z,{fullWidth:!0,id:`qty-input-${s}`,value:(null===e||void 0===e?void 0:e.qty)||"",onChange:t=>{const n=t.target.value;K(s,"qty",n),K(s,"amount",n*(null===e||void 0===e?void 0:e.rate)-(null===e||void 0===e?void 0:e.discount)||0)},onKeyDown:e=>{var t,n;"Enter"===e.key&&(e.preventDefault(),k?null===(t=document.querySelector(`#discount-input-${s}`))||void 0===t||t.focus():null===b||void 0===b||null===(n=b.current)||void 0===n||n.focus())}})}),(0,f.jsx)(l.Z,{sx:{width:"10%"},children:(0,f.jsx)(y.Z,{fullWidth:!0,value:(null===e||void 0===e?void 0:e.rate)||"",disabled:!0})}),k&&(0,f.jsx)(l.Z,{sx:{width:"10%"},children:(0,f.jsx)(y.Z,{fullWidth:!0,id:`discount-input-${s}`,value:(null===e||void 0===e?void 0:e.discount)||"",onChange:t=>{const n=Number(t.target.value)||0;K(s,"discount",n),K(s,"amount",Number((null===e||void 0===e?void 0:e.rate)*(null===e||void 0===e?void 0:e.qty))-n||0)},onKeyDown:e=>{var t;"Enter"===e.key&&(e.preventDefault(),null===b||void 0===b||null===(t=b.current)||void 0===t||t.focus())}})}),(0,f.jsx)(l.Z,{sx:{width:"10%"},children:(0,f.jsx)(y.Z,{fullWidth:!0,value:(null===e||void 0===e?void 0:e.amount)||"",disabled:!0})}),(0,f.jsx)(l.Z,{sx:{width:"10%"},children:(0,f.jsx)(p.Z,{variant:"contained",color:"error",onClick:()=>(e=>{const s=[...t];s.splice(e,1),s.length>0?n(s):n([{sparesId:"",category:"",sparesAndLabour:"",qty:"",rate:"",discount:"",amount:""}])})(s),children:"Delete"})})]},s)))})]})})}),(0,f.jsxs)(j.ZP,{item:!0,xs:12,children:[(0,f.jsx)("br",{}),(0,f.jsx)(p.Z,{variant:"contained",color:"error",onClick:()=>{const e=[{sparesId:"",category:"",sparesAndLabour:"",qty:"",rate:"",discount:"",amount:""}];n((t=>[...t,...e]))},ref:b,children:"Add Row"})]})]})}}}]);
//# sourceMappingURL=2789.a095cf05.chunk.js.map