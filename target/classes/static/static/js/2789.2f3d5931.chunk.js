"use strict";(self.webpackChunkcar_wash_management=self.webpackChunkcar_wash_management||[]).push([[2789],{32789:function(e,s,t){t.r(s);var a=t(72791),i=t(61889),l=t(39281),n=t(79836),d=t(56890),o=t(35855),r=t(53994),c=t(53382),u=t(68096),h=t(94925),x=t(58406),v=t(23786),g=t(49644),m=t(48550),j=t(94294),Z=t(23735),y=t(13967),p=t(95193),w=t(19035),b=t(80184);s.default=e=>{let{data:s,updateData:t}=e;const f=(0,y.Z)(),C=(0,p.Z)(f.breakpoints.down("sm")),S=["ADMIN"],A=(JSON.parse(localStorage.getItem("roles"))||[]).some((e=>S.includes(e))),[I,k]=a.useState([]),[W,q]=a.useState([]),[L,N]=a.useState([]);a.useEffect((()=>(_(),O(),()=>{k([]),q([]),N([])})),[]);const _=async()=>{try{const e=await(0,w.A_)("/service/serviceCategory");k(e)}catch(e){console.log(e.message)}},O=async()=>{try{const e=await(0,w.A_)("/service");N(e)}catch(e){console.log(e.message)}},D=(e,a,i)=>{const l=[...s];l[e][a]=i,t(l)},J=e=>{(async e=>{try{const s=await(0,w.j0)("/service/findServiceInventoryWithFilter",e);q(s)}catch(s){console.log(s.message)}})({categoryList:[e]})};return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)(Z.Z,{title:"Job Service Information",children:[(0,b.jsx)("div",{style:{overflowX:"auto"},children:(0,b.jsx)(l.Z,{children:(0,b.jsxs)(n.Z,{style:{minWidth:C?"600px":"1000px"},children:[(0,b.jsx)(d.Z,{children:(0,b.jsxs)(o.Z,{children:[(0,b.jsx)(r.Z,{sx:{width:"20%"},children:"Category"}),(0,b.jsx)(r.Z,{sx:{width:"30%"},children:"Spares"}),(0,b.jsx)(r.Z,{sx:{width:"10%"},children:"Qty"}),(0,b.jsx)(r.Z,{sx:{width:"10%"},children:"Rate"}),A&&(0,b.jsx)(r.Z,{sx:{width:"10%"},children:"Discount"}),(0,b.jsx)(r.Z,{sx:{width:"10%"},children:"Amount"}),(0,b.jsx)(r.Z,{sx:{width:"10%"},children:"Action"})]})}),(0,b.jsx)(c.Z,{children:s.map(((e,a)=>(0,b.jsxs)(o.Z,{children:[(0,b.jsx)(r.Z,{sx:{width:"20%"},children:(0,b.jsxs)(u.Z,{variant:"standard",sx:{m:1,minWidth:120},children:[(0,b.jsx)(h.Z,{id:"demo-simple-select-standard-label"}),(0,b.jsx)(x.Z,{fullWidth:!0,labelId:"demo-simple-select-standard-label",id:"demo-simple-select-standard-label",value:(null===e||void 0===e?void 0:e.category)||"",label:"Category Type",sx:{"& .MuiSelect-select":{color:"black"}},onChange:e=>{J(e.target.value),D(a,"category",e.target.value)},children:I.map((e=>(0,b.jsx)(v.Z,{value:e.category,children:e.category},e.id)))})]})}),(0,b.jsx)(r.Z,{sx:{width:"30%"},children:(0,b.jsx)(g.Z,{options:W.filter((e=>!s.some((s=>s.sparesId===e.id)))),getOptionLabel:e=>e.desc,style:{width:300},value:L.find((s=>s.desc===e.sparesAndLabour))||null,isOptionEqualToValue:(e,s)=>e.id===s.id,onChange:(s,t)=>{console.log("new value is "+JSON.stringify(t)),console.log("row is "+JSON.stringify(e)),D(a,"sparesAndLabour",t.desc),D(a,"rate",t.amount),D(a,"amount",t.amount*(null===e||void 0===e?void 0:e.qty)-(null===e||void 0===e?void 0:e.discount)||0),D(a,"sparesId",t.id)},renderInput:s=>(0,b.jsx)(m.Z,{...s,label:"Search Service",disabled:!!e.sparesId})})}),(0,b.jsx)(r.Z,{sx:{width:"10%"},children:(0,b.jsx)(m.Z,{fullWidth:!0,value:(null===e||void 0===e?void 0:e.qty)||"",onChange:s=>{const t=s.target.value;D(a,"qty",t),D(a,"amount",t*(null===e||void 0===e?void 0:e.rate)-(null===e||void 0===e?void 0:e.discount)||0)}})}),(0,b.jsx)(r.Z,{sx:{width:"10%"},children:(0,b.jsx)(m.Z,{fullWidth:!0,value:(null===e||void 0===e?void 0:e.rate)||"",disabled:!0,onChange:e=>D(a,"rate",e.target.value)})}),A&&(0,b.jsx)(r.Z,{sx:{width:"10%"},children:(0,b.jsx)(m.Z,{fullWidth:!0,value:(null===e||void 0===e?void 0:e.discount)||"",onChange:s=>{const t=Number(s.target.value)||0;D(a,"discount",t),D(a,"amount",Number((null===e||void 0===e?void 0:e.rate)*(null===e||void 0===e?void 0:e.qty))-t||0)}})}),(0,b.jsx)(r.Z,{sx:{width:"10%"},children:(0,b.jsx)(m.Z,{fullWidth:!0,value:(null===e||void 0===e?void 0:e.amount)||"",disabled:!0,onChange:e=>D(a,"amount",e.target.value)})}),(0,b.jsx)(r.Z,{sx:{width:"10%"},children:(0,b.jsx)(j.Z,{variant:"contained",color:"error",onClick:()=>(e=>{const a=[...s];a.splice(e,1),a.length>0?t(a):t([...Array(1)].map((()=>({sparesId:"",category:"",sparesAndLabour:"",qty:"",rate:"",discount:"",amount:""}))))})(a),children:"Delete"})})]},a)))})]})})}),(0,b.jsxs)(i.ZP,{item:!0,xs:12,children:[(0,b.jsx)("br",{}),(0,b.jsx)(j.Z,{variant:"contained",color:"error",onClick:()=>{const e=[...Array(1)].map((()=>({sparesId:"",category:"",sparesAndLabour:"",qty:"",rate:"",discount:"",amount:""})));t((s=>[...s,...e]))},children:"Add Row"})]})]})})}}}]);
//# sourceMappingURL=2789.2f3d5931.chunk.js.map