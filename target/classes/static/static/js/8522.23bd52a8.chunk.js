"use strict";(self.webpackChunkcar_wash_management=self.webpackChunkcar_wash_management||[]).push([[8522,4193],{44193:function(e,t,a){a.r(t);var n=a(72791),s=a(61889),l=a(48550),i=a(49644),o=a(94925),r=a(58406),c=a(23786),m=a(94294),d=a(23735),u=a(91923),p=a(67724),h=a(19035),x=a(97892),v=a.n(x),j=a(29464),g=a(80184);t.default=function(e){let{data:t,setAppointmentUpdateOpen:a,fetchAllAppointmentData:x}=e;const Z=t?{...t,appointmentDateTime:t.appointmentDateTime?v()(t.appointmentDateTime):null}:{},[f,D]=(0,n.useState)(Z),[C,b]=(0,n.useState)([]),[S,A]=(0,n.useState)([]),[E,N]=n.useState(!1),[T,w]=n.useState(""),[P,y]=n.useState("");(0,n.useEffect)((()=>(L(),R(),()=>{D({}),b([]),A([])})),[]),(0,n.useEffect)((()=>{console.log(t),D(t?{...t,appointmentDateTime:t.appointmentDateTime?v()(t.appointmentDateTime):null}:{})}),[t]);const L=async()=>{try{const e=await(0,h.A_)("/service");b(e)}catch(e){console.log(e.message)}},R=async()=>{try{const e=await(0,h.A_)("/employee");A(e)}catch(e){console.error(e.message)}},M=(e,t)=>{const a={...f,[e]:t};D(a)};return(0,g.jsxs)("div",{children:[(0,g.jsx)(d.Z,{title:"Enter Appointment Details",children:(0,g.jsxs)(s.ZP,{container:!0,direction:"row",spacing:u.dv,children:[(0,g.jsxs)(s.ZP,{item:!0,xs:4,children:[(0,g.jsx)("br",{}),(0,g.jsx)(l.Z,{label:"Customer Name",required:!0,variant:"standard",value:f.customerName||"",onChange:e=>M("customerName",e.target.value)})]}),(0,g.jsx)(s.ZP,{item:!0,xs:4,children:(0,g.jsx)(l.Z,{label:"Phone",required:!0,variant:"outlined",value:f.phone||"",onChange:e=>M("phone",e.target.value)})}),(0,g.jsx)(s.ZP,{item:!0,xs:4,children:(0,g.jsx)(l.Z,{label:"Vehicle Registration No",required:!0,variant:"outlined",value:f.vehicleRegNo||"",onChange:e=>M("vehicleRegNo",e.target.value)})}),(0,g.jsx)(s.ZP,{item:!0,xs:4,children:(0,g.jsx)(i.Z,{options:C,getOptionLabel:e=>e.desc,value:C.find((e=>e.desc===f.service))||null,onChange:(e,t)=>{M("service",t?t.desc:"")},renderInput:e=>(0,g.jsx)(l.Z,{...e,label:"Select Service",variant:"outlined",fullWidth:!0})})}),(0,g.jsx)(s.ZP,{item:!0,xs:4,children:(0,g.jsx)(p.x,{label:"Appointment Date & Time",value:f.appointmentDateTime,onChange:e=>{D({...f,appointmentDateTime:e})},shouldDisableDate:e=>0===e.day(),renderInput:e=>(0,g.jsx)(l.Z,{...e,fullWidth:!0})})}),(0,g.jsxs)(s.ZP,{item:!0,xs:4,children:[(0,g.jsx)(o.Z,{id:"demo-select-small",children:"Status"}),(0,g.jsx)(r.Z,{labelId:"demo-select-small",id:"demo-select-small",value:f.status||"SCHEDULED",label:"Status",onChange:e=>M("status",e.target.value),children:["SCHEDULED","IN-PROGRESS","COMPLETED","CANCELLED"].map((e=>(0,g.jsx)(c.Z,{value:e,children:e},e)))})]}),(0,g.jsxs)(s.ZP,{item:!0,xs:2,children:[(0,g.jsx)(o.Z,{id:"demo-select-small",children:"Staff"}),(0,g.jsx)(r.Z,{labelId:"demo-select-small",id:"demo-select-small",value:f.staffName||"",label:"Staff",onChange:e=>M("staffName",e.target.value),children:S.map((e=>(0,g.jsx)(c.Z,{value:e.name,children:e.name},e.id)))})]}),(0,g.jsx)(s.ZP,{item:!0,xs:10,children:(0,g.jsx)(l.Z,{label:"Description",variant:"standard",multiline:!0,fullWidth:!0,value:f.description||"",onChange:e=>M("description",e.target.value)})})]})}),(0,g.jsx)("br",{}),(0,g.jsx)("div",{className:"content",children:f.customerName&&f.phone&&f.vehicleRegNo&&f.service&&f.appointmentDateTime&&(0,g.jsx)(m.Z,{variant:"contained",color:"error",onClick:()=>(async e=>{const t={...e,status:e.status?e.status:"SCHEDULED",appointmentDateTime:v()(e.appointmentDateTime).format("YYYY-MM-DDTHH:mm:ss")};try{const e=await(0,h.j0)("/appointments",t);x&&x(),a&&a(!1),w("Created appointment for "+e.customerName),y("success"),N(!0),console.log(e)}catch(n){console.log(n.message),w(n.message),y("info"),N(!0)}})(f),children:"Add/Update Appointment"})}),E&&(0,g.jsx)(j.Z,{showAlert:E,setShowAlert:N,alertColor:P,alertMess:T})]})}},7883:function(e,t,a){a(72791);var n=a(76189),s=a(80184);t.Z=(0,n.Z)((0,s.jsx)("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft")},11883:function(e,t,a){a(72791);var n=a(76189),s=a(80184);t.Z=(0,n.Z)((0,s.jsx)("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight")}}]);
//# sourceMappingURL=8522.23bd52a8.chunk.js.map