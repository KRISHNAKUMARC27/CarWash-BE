"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[5380],{5380:function(e,t,s){s.r(t);var a=s(72791),r=s(68899),l=s(13967),o=s(61979),n=s(44507),i=s(64554),c=s(20068),d=s(13400),h=s(38820),u=s(45781),m=s(44713),y=s(19035),g=s(29464),p=s(80184);const b=(0,m.Z)((0,a.lazy)((()=>s.e(7901).then(s.bind(s,22298))))),f=(0,m.Z)((0,a.lazy)((()=>s.e(2909).then(s.bind(s,72909)))));t.default=()=>{const[e,t]=(0,a.useState)(!1),[s,m]=(0,a.useState)(""),[v,x]=(0,a.useState)([]),[z,w]=(0,a.useState)(),[C,S]=(0,a.useState)(!1),[j,Z]=(0,a.useState)({}),M=(0,a.useMemo)((()=>Object.keys(j).map((e=>v[e]))),[j,v]),[A,k]=(0,a.useState)(!1),[K,_]=(0,a.useState)([]);(0,a.useEffect)((()=>(V(),N(),()=>{x([]),_([])})),[]);const V=async()=>{try{const e=await(0,y.A_)("/invoice/findByCreditFlag");x(e)}catch(e){console.error(e.message)}},N=async()=>{try{const e=await(0,y.A_)("/config/paymentmodes");_(e)}catch(e){console.log(e.message)}},O=()=>{S(!1),w({}),k(!1),V()},R=(0,a.useMemo)((()=>[{accessorKey:"invoiceId",header:"Id",size:50},{accessorKey:"jobId",header:"JobCard No.",size:50},{accessorKey:"grandTotal",header:"Bill Amt",size:50},{accessorKey:"pendingAmount",header:"Pending",size:50},{accessorKey:"ownerName",header:"Owner",size:50},{accessorKey:"vehicleName",header:"Vehicle",size:50},{accessorKey:"vehicleRegNo",header:"Reg. No.",size:50},{accessorKey:"ownerPhoneNumber",header:"Phone",size:100},{accessorKey:"billCloseDate",header:"Bill Close Date",size:100},{accessorKey:"creditFlag",header:"Credit ?",size:100,filterVariant:"multi-select",Cell:e=>{let{cell:t}=e;return t.getValue()?"Yes":"No"}},{accessorKey:"creditSettledFlag",header:"Credit Settled ?",size:100,filterVariant:"multi-select",Cell:e=>{let{cell:t}=e;return t.getValue()?"Yes":"No"}}]),[]),F=(0,l.Z)(),P=(0,a.useMemo)((()=>(0,o.Z)({palette:{mode:F.palette.mode,primary:F.palette.secondary,info:{main:"rgb(255,122,0)"},background:{default:"rgba(0, 0, 0, 0)"}},typography:{button:{textTransform:"none",fontSize:"1.2rem"}},components:{MuiTooltip:{styleOverrides:{tooltip:{fontSize:"1.1rem"}}},MuiSwitch:{styleOverrides:{thumb:{color:"pink"}}}}})),[F]);return(0,p.jsxs)(p.Fragment,{children:[e&&(0,p.jsx)(g.Z,{showAlert:e,setShowAlert:t,alertColor:alertColor,alertMess:s}),(0,p.jsx)(n.Z,{theme:P,children:(0,p.jsx)(r.P2,{columns:R,data:v,enableFacetedValues:!0,enableEditing:!0,enableRowSelection:!0,onRowSelectionChange:Z,state:{rowSelection:j},muiTablePaperProps:{elevation:0,sx:{borderRadius:"0",background:"linear-gradient(195deg, #e2d7d5, #cf8989)"}},renderRowActions:e=>{let{row:t}=e;return(0,p.jsx)(i.Z,{sx:{display:"flex",gap:"1rem"},children:(0,p.jsx)(c.Z,{arrow:!0,placement:"right",title:"Invoice",children:(0,p.jsx)(d.Z,{onClick:()=>{w(t.original),S(!0)},children:(0,p.jsx)(h.Z,{})})})})},renderTopToolbarCustomActions:()=>Object.keys(j).length>0&&(0,p.jsx)(i.Z,{sx:{display:"flex",gap:2},children:(0,p.jsx)(c.Z,{title:"Settle Bill",children:(0,p.jsx)(d.Z,{onClick:()=>{M.some((e=>0===e.pendingAmount))?alert("One or more rows have a pending amount of 0."):k(!0)},children:(0,p.jsx)(u.Z,{})})})})})}),C&&(0,p.jsx)(b,{invoice:z,setInvoice:w,paymentModes:K,invoiceCreateOpen:C,handleClose:O,setAlertMess:m,setShowAlert:t}),A&&(0,p.jsx)(f,{paymentModes:K,settleBillDialogOpen:A,selectedRows:M,handleClose:O,setAlertMess:m,setShowAlert:t})]})}},38820:function(e,t,s){var a=s(76189),r=s(80184);t.Z=(0,a.Z)((0,r.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit")},45781:function(e,t,s){var a=s(76189),r=s(80184);t.Z=(0,a.Z)((0,r.jsx)("path",{fillRule:"evenodd",d:"M20 3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM10 17H5v-2h5v2zm0-4H5v-2h5v2zm0-4H5V7h5v2zm4.82 6L12 12.16l1.41-1.41 1.41 1.42L17.99 9l1.42 1.42L14.82 15z"}),"FactCheck")}}]);
//# sourceMappingURL=5380.67d14494.chunk.js.map