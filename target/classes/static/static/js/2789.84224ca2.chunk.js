"use strict";(self.webpackChunkcar_wash_management=self.webpackChunkcar_wash_management||[]).push([[2789],{32789:function(e,t,n){n.r(t);var i=n(72791),s=n(39281),l=n(79836),o=n(56890),d=n(35855),r=n(53994),a=n(53382),c=n(68096),u=n(94925),v=n(58406),h=n(23786),x=n(49644),j=n(48550),y=n(94294),Z=n(61889),p=n(23735),m=n(13967),w=n(95193),f=n(19035),g=n(80184);t.default=e=>{let{data:t,updateData:n,firstInputRef:b}=e;const S=(0,m.Z)(),D=(0,w.Z)(S.breakpoints.down("sm")),k=["ADMIN"],q=(JSON.parse(localStorage.getItem("roles"))||[]).some((e=>k.includes(e))),[C,I]=i.useState([]),[A,W]=i.useState([]),[E,$]=i.useState([]);i.useEffect((()=>(_(),L(),()=>{I([]),W([]),$([])})),[]);const _=async()=>{try{const e=await(0,f.A_)("/service/serviceCategory");I(e)}catch(e){console.log(e.message)}},L=async()=>{try{const e=await(0,f.A_)("/service");$(e)}catch(e){console.log(e.message)}},K=(e,i,s)=>{const l=[...t];l[e][i]=s,n(l)},N=e=>{(async e=>{try{const t=await(0,f.j0)("/service/findServiceInventoryWithFilter",e);W(t)}catch(t){console.log(t.message)}})({categoryList:[e]})};return(0,g.jsxs)(p.Z,{title:"Job Service Information",children:[(0,g.jsx)("div",{style:{overflowX:"auto"},children:(0,g.jsx)(s.Z,{children:(0,g.jsxs)(l.Z,{style:{minWidth:D?"600px":"1000px"},children:[(0,g.jsx)(o.Z,{children:(0,g.jsxs)(d.Z,{children:[(0,g.jsx)(r.Z,{sx:{width:"20%"},children:"Category"}),(0,g.jsx)(r.Z,{sx:{width:"30%"},children:"Service"}),(0,g.jsx)(r.Z,{sx:{width:"10%"},children:"Qty"}),(0,g.jsx)(r.Z,{sx:{width:"10%"},children:"Rate"}),q&&(0,g.jsx)(r.Z,{sx:{width:"10%"},children:"Discount"}),(0,g.jsx)(r.Z,{sx:{width:"10%"},children:"Amount"}),(0,g.jsx)(r.Z,{sx:{width:"10%"},children:"Action"})]})}),(0,g.jsx)(a.Z,{children:null===t||void 0===t?void 0:t.map(((e,i)=>(0,g.jsxs)(d.Z,{children:[(0,g.jsx)(r.Z,{sx:{width:"20%"},children:(0,g.jsxs)(c.Z,{variant:"standard",sx:{m:1,minWidth:120},children:[(0,g.jsx)(u.Z,{}),(0,g.jsx)(v.Z,{fullWidth:!0,value:(null===e||void 0===e?void 0:e.category)||"",onChange:e=>{N(e.target.value),K(i,"category",e.target.value)},onKeyDown:e=>{var t;"Enter"===e.key&&(e.preventDefault(),null===(t=document.querySelector(`#spares-input-${i}`))||void 0===t||t.focus())},children:C.map((e=>(0,g.jsx)(h.Z,{value:e.category,children:e.category},e.id)))})]})}),(0,g.jsx)(r.Z,{sx:{width:"30%"},children:(0,g.jsx)(x.Z,{options:A.filter((e=>!t.some((t=>t.sparesId===e.id)))),getOptionLabel:e=>e.desc,style:{width:300},value:E.find((t=>t.desc===e.sparesAndLabour))||null,isOptionEqualToValue:(e,t)=>e.id===t.id,onChange:(t,n)=>{n&&(K(i,"sparesAndLabour",n.desc),K(i,"rate",n.amount),K(i,"amount",n.amount*(null===e||void 0===e?void 0:e.qty)-(null===e||void 0===e?void 0:e.discount)||0),K(i,"sparesId",n.id))},renderInput:t=>(0,g.jsx)(j.Z,{...t,id:`spares-input-${i}`,label:"Search Service",disabled:!!e.sparesId,onKeyDown:e=>{var t;"Enter"===e.key&&(e.preventDefault(),null===(t=document.querySelector(`#qty-input-${i}`))||void 0===t||t.focus())}})})}),(0,g.jsx)(r.Z,{sx:{width:"10%"},children:(0,g.jsx)(j.Z,{fullWidth:!0,id:`qty-input-${i}`,value:(null===e||void 0===e?void 0:e.qty)||"",onChange:t=>{const n=t.target.value;K(i,"qty",n),K(i,"amount",n*(null===e||void 0===e?void 0:e.rate)-(null===e||void 0===e?void 0:e.discount)||0)},onKeyDown:e=>{var t,n;"Enter"===e.key&&(e.preventDefault(),q?null===(t=document.querySelector(`#discount-input-${i}`))||void 0===t||t.focus():null===b||void 0===b||null===(n=b.current)||void 0===n||n.focus())}})}),(0,g.jsx)(r.Z,{sx:{width:"10%"},children:(0,g.jsx)(j.Z,{fullWidth:!0,value:(null===e||void 0===e?void 0:e.rate)||"",disabled:!0})}),q&&(0,g.jsx)(r.Z,{sx:{width:"10%"},children:(0,g.jsx)(j.Z,{fullWidth:!0,id:`discount-input-${i}`,value:(null===e||void 0===e?void 0:e.discount)||"",onChange:t=>{const n=Number(t.target.value)||0;K(i,"discount",n),K(i,"amount",Number((null===e||void 0===e?void 0:e.rate)*(null===e||void 0===e?void 0:e.qty))-n||0)},onKeyDown:e=>{var t;"Enter"===e.key&&(e.preventDefault(),null===b||void 0===b||null===(t=b.current)||void 0===t||t.focus())}})}),(0,g.jsx)(r.Z,{sx:{width:"10%"},children:(0,g.jsx)(j.Z,{fullWidth:!0,value:(null===e||void 0===e?void 0:e.amount)||"",disabled:!0})}),(0,g.jsx)(r.Z,{sx:{width:"10%"},children:(0,g.jsx)(y.Z,{variant:"contained",color:"error",onClick:()=>(e=>{const i=[...t];i.splice(e,1),i.length>0?n(i):n(null)})(i),children:"Delete"})})]},i)))})]})})}),(0,g.jsxs)(Z.ZP,{item:!0,xs:12,children:[(0,g.jsx)("br",{}),(0,g.jsx)(y.Z,{variant:"contained",color:"error",onClick:()=>{const e=[{sparesId:"",category:"",sparesAndLabour:"",qty:"",rate:"",discount:"",amount:""}];n((t=>[...null!==t&&void 0!==t?t:[],...e]))},ref:b,children:"Add Row"})]})]})}}}]);
//# sourceMappingURL=2789.84224ca2.chunk.js.map