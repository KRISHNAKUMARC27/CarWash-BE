"use strict";(self.webpackChunkcar_wash_management=self.webpackChunkcar_wash_management||[]).push([[5380],{5380:function(e,t,s){s.r(t);var a=s(72791),l=s(68899),r=s(13967),o=s(61979),n=s(44507),i=s(64554),c=s(20068),d=s(13400),h=s(38820),u=s(45781),m=s(44713),g=s(19035),p=s(29464),y=s(80184);const b=(0,m.Z)((0,a.lazy)((()=>s.e(7901).then(s.bind(s,22298))))),f=(0,m.Z)((0,a.lazy)((()=>s.e(2909).then(s.bind(s,72909)))));t.default=()=>{const[e,t]=(0,a.useState)(!1),[s,m]=(0,a.useState)(""),[v,w]=(0,a.useState)([]),[x,z]=(0,a.useState)(),[S,C]=(0,a.useState)(!1),[j,Z]=(0,a.useState)({}),M=(0,a.useMemo)((()=>Object.keys(j).map((e=>v[e]))),[j,v]),[A,k]=(0,a.useState)(!1),[K,N]=(0,a.useState)([]),O=JSON.parse(localStorage.getItem("roles"))||[];(0,a.useEffect)((()=>(V(),I(),()=>{w([]),N([])})),[]);const V=async()=>{try{const e=await(0,g.A_)("/invoice/findByCreditFlag");w(e)}catch(e){console.error(e.message)}},I=async()=>{try{const e=await(0,g.A_)("/config/paymentmodes");N(e)}catch(e){console.log(e.message)}},R=()=>{C(!1),z({}),k(!1),V()},F=(0,a.useMemo)((()=>[{accessorKey:"invoiceId",header:"Id",size:50},{accessorKey:"jobId",header:"JobCard No.",size:50},{accessorKey:"grandTotal",header:"Bill Amt",size:50},{accessorKey:"pendingAmount",header:"Pending",size:50},{accessorKey:"ownerName",header:"Owner",size:50},{accessorKey:"vehicleName",header:"Vehicle",size:50},{accessorKey:"vehicleRegNo",header:"Reg. No.",size:50},{accessorKey:"ownerPhoneNumber",header:"Phone",size:100},{accessorKey:"billCloseDate",header:"Bill Close Date",size:100},{accessorKey:"creditFlag",header:"Credit ?",size:100,filterVariant:"multi-select",Cell:e=>{let{cell:t}=e;return t.getValue()?"Yes":"No"}},{accessorKey:"creditSettledFlag",header:"Credit Settled ?",size:100,filterVariant:"multi-select",Cell:e=>{let{cell:t}=e;return t.getValue()?"Yes":"No"}}]),[]),P=(0,r.Z)(),T=(0,a.useMemo)((()=>(0,o.Z)({palette:{mode:P.palette.mode,primary:P.palette.secondary,info:{main:"rgb(255,122,0)"},background:{default:"rgba(0, 0, 0, 0)"}},typography:{button:{textTransform:"none",fontSize:"1.2rem"}},components:{MuiTooltip:{styleOverrides:{tooltip:{fontSize:"1.1rem"}}},MuiSwitch:{styleOverrides:{thumb:{color:"pink"}}}}})),[P]);let _="#e2d7d5",B="#cf8989";return O.includes("INVOICE")&&(_="#e2d7d5",B="#71acda"),(0,y.jsxs)(y.Fragment,{children:[e&&(0,y.jsx)(p.Z,{showAlert:e,setShowAlert:t,alertColor:alertColor,alertMess:s}),(0,y.jsx)(n.Z,{theme:T,children:(0,y.jsx)(l.P2,{columns:F,data:v,enableFacetedValues:!0,enableEditing:!0,enableRowSelection:!0,onRowSelectionChange:Z,state:{rowSelection:j},muiTablePaperProps:{elevation:0,sx:{borderRadius:"0",background:`linear-gradient(195deg, ${_}, ${B})`}},renderRowActions:e=>{let{row:t}=e;return(0,y.jsx)(i.Z,{sx:{display:"flex",gap:"1rem"},children:(0,y.jsx)(c.Z,{arrow:!0,placement:"right",title:"Invoice",children:(0,y.jsx)(d.Z,{onClick:()=>{z(t.original),C(!0)},children:(0,y.jsx)(h.Z,{})})})})},renderTopToolbarCustomActions:()=>Object.keys(j).length>0&&(0,y.jsx)(i.Z,{sx:{display:"flex",gap:2},children:(0,y.jsx)(c.Z,{title:"Settle Bill",children:(0,y.jsx)(d.Z,{onClick:()=>{M.some((e=>0===e.pendingAmount))?alert("One or more rows have a pending amount of 0."):k(!0)},children:(0,y.jsx)(u.Z,{})})})})})}),S&&(0,y.jsx)(b,{invoice:x,setInvoice:z,paymentModes:K,invoiceCreateOpen:S,handleClose:R,setAlertMess:m,setShowAlert:t}),A&&(0,y.jsx)(f,{paymentModes:K,settleBillDialogOpen:A,selectedRows:M,handleClose:R,setAlertMess:m,setShowAlert:t})]})}},38820:function(e,t,s){var a=s(76189),l=s(80184);t.Z=(0,a.Z)((0,l.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit")},45781:function(e,t,s){var a=s(76189),l=s(80184);t.Z=(0,a.Z)((0,l.jsx)("path",{fillRule:"evenodd",d:"M20 3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM10 17H5v-2h5v2zm0-4H5v-2h5v2zm0-4H5V7h5v2zm4.82 6L12 12.16l1.41-1.41 1.41 1.42L17.99 9l1.42 1.42L14.82 15z"}),"FactCheck")}}]);
//# sourceMappingURL=5380.743697ad.chunk.js.map