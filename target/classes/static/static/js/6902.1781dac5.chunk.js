"use strict";(self.webpackChunkcar_wash_management=self.webpackChunkcar_wash_management||[]).push([[6902],{6902:function(e,t,s){s.r(t);var a=s(72791),l=s(68899),o=s(13967),r=s(61979),n=s(44507),i=s(64554),c=s(20068),d=s(13400),h=s(38820),m=s(45781),u=s(93213),p=s(29464),g=s(44713),y=s(19035),v=s(80184);const x=(0,g.Z)((0,a.lazy)((()=>s.e(7901).then(s.bind(s,22298))))),z=(0,g.Z)((0,a.lazy)((()=>s.e(2909).then(s.bind(s,72909))))),w=(0,g.Z)((0,a.lazy)((()=>s.e(9158).then(s.bind(s,49158)))));t.default=()=>{const[e,t]=(0,a.useState)(!1),[s,g]=(0,a.useState)(""),[S,j]=(0,a.useState)("info"),[Z,b]=(0,a.useState)([]),[f,C]=(0,a.useState)(),[M,A]=(0,a.useState)(!1),[L,k]=(0,a.useState)({}),N=(0,a.useMemo)((()=>Object.keys(L).map((e=>Z[e]))),[L,Z]),[R,V]=(0,a.useState)(!1),[K,O]=(0,a.useState)([]),[I,H]=(0,a.useState)({}),[T,P]=(0,a.useState)(!1),_=JSON.parse(localStorage.getItem("roles"))||[];(0,a.useEffect)((()=>(F(),B(),()=>{b([]),O([])})),[]);const F=async()=>{try{const e=await(0,y.A_)("/invoice");b(e)}catch(e){console.error(e.message)}},B=async()=>{try{const e=await(0,y.A_)("/config/paymentmodes");O(e)}catch(e){console.log(e.message)}},D=()=>{A(!1),C({}),V(!1),P(!1),F()},E=(0,a.useMemo)((()=>[{accessorKey:"invoiceId",header:"Id",size:50},{accessorKey:"jobId",header:"JobCard No.",size:50},{accessorKey:"grandTotal",header:"Bill Amt",size:50},{accessorKey:"pendingAmount",header:"Pending",size:50},{accessorKey:"ownerName",header:"Owner",size:50},{accessorKey:"vehicleName",header:"Vehicle",size:50},{accessorKey:"vehicleRegNo",header:"Reg. No.",size:50},{accessorKey:"ownerPhoneNumber",header:"Phone",size:100},{accessorKey:"billCloseDate",header:"Bill Close Date",size:100},{accessorKey:"creditFlag",header:"Credit ?",size:100,filterVariant:"multi-select",Cell:e=>{let{cell:t}=e;return t.getValue()?"Yes":"No"}},{accessorKey:"creditSettledFlag",header:"Credit Settled ?",size:100,filterVariant:"multi-select",Cell:e=>{let{cell:t}=e;return t.getValue()?"Yes":"No"}}]),[]),J=(0,o.Z)(),Y=(0,a.useMemo)((()=>(0,r.Z)({palette:{mode:J.palette.mode,primary:J.palette.secondary,info:{main:"rgb(255,122,0)"},background:{default:"rgba(0, 0, 0, 0)"}},typography:{button:{textTransform:"none",fontSize:"1.2rem"}},components:{MuiTooltip:{styleOverrides:{tooltip:{fontSize:"1.1rem"}}},MuiSwitch:{styleOverrides:{thumb:{color:"pink"}}}}})),[J]);let $="#e2d7d5",q="#cf8989";return _.includes("INVOICE")&&($="#e2d7d5",q="#71acda"),(0,v.jsxs)(v.Fragment,{children:[e&&(0,v.jsx)(p.Z,{showAlert:e,setShowAlert:t,alertColor:S,alertMess:s}),(0,v.jsx)(n.Z,{theme:Y,children:(0,v.jsx)(l.P2,{columns:E,data:Z,enableFacetedValues:!0,enableEditing:!0,enableRowSelection:!0,onRowSelectionChange:k,state:{rowSelection:L},muiTablePaperProps:{elevation:0,sx:{borderRadius:"0",background:`linear-gradient(195deg, ${$}, ${q})`}},renderRowActions:e=>{let{row:t}=e;return(0,v.jsx)(i.Z,{sx:{display:"flex",gap:"1rem"},children:(0,v.jsx)(c.Z,{arrow:!0,placement:"right",title:"Invoice",children:(0,v.jsx)(d.Z,{onClick:()=>{C(t.original),A(!0)},children:(0,v.jsx)(h.Z,{})})})})},renderTopToolbarCustomActions:()=>Object.keys(L).length>0&&(0,v.jsxs)(i.Z,{sx:{display:"flex",gap:2},children:[(0,v.jsx)(c.Z,{title:"Settle Bill",children:(0,v.jsx)(d.Z,{onClick:()=>{N.some((e=>0===e.pendingAmount))?alert("One or more rows have a pending amount of 0."):V(!0)},children:(0,v.jsx)(m.Z,{})})}),(0,v.jsx)(c.Z,{title:"Receipt",children:(0,v.jsx)(d.Z,{onClick:()=>{H((e=>({...e,amount:N.reduce(((e,t)=>e+(t.grandTotal||0)),0),invoiceIdList:N.map((e=>e.invoiceId)),ownerName:N[0].ownerName}))),P(!0)},children:(0,v.jsx)(u.Z,{})})})]})})}),M&&(0,v.jsx)(x,{invoice:f,setInvoice:C,paymentModes:K,invoiceCreateOpen:M,handleClose:D,setAlertMess:g,setShowAlert:t,setAlertColor:j}),R&&(0,v.jsx)(z,{paymentModes:K,settleBillDialogOpen:R,selectedRows:N,handleClose:D,setAlertMess:g,setShowAlert:t}),T&&(0,v.jsx)(w,{receipt:I,setReceipt:H,paymentModes:K,receiptDialogOpen:T,selectedRows:N,handleClose:D,setAlertMess:g,setShowAlert:t})]})}},38820:function(e,t,s){var a=s(76189),l=s(80184);t.Z=(0,a.Z)((0,l.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit")},45781:function(e,t,s){var a=s(76189),l=s(80184);t.Z=(0,a.Z)((0,l.jsx)("path",{fillRule:"evenodd",d:"M20 3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM10 17H5v-2h5v2zm0-4H5v-2h5v2zm0-4H5V7h5v2zm4.82 6L12 12.16l1.41-1.41 1.41 1.42L17.99 9l1.42 1.42L14.82 15z"}),"FactCheck")},93213:function(e,t,s){var a=s(76189),l=s(80184);t.Z=(0,a.Z)((0,l.jsx)("path",{d:"M18 17H6v-2h12v2zm0-4H6v-2h12v2zm0-4H6V7h12v2zM3 22l1.5-1.5L6 22l1.5-1.5L9 22l1.5-1.5L12 22l1.5-1.5L15 22l1.5-1.5L18 22l1.5-1.5L21 22V2l-1.5 1.5L18 2l-1.5 1.5L15 2l-1.5 1.5L12 2l-1.5 1.5L9 2 7.5 3.5 6 2 4.5 3.5 3 2v20z"}),"Receipt")}}]);
//# sourceMappingURL=6902.1781dac5.chunk.js.map